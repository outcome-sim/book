<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>The Outcome Project Book</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="/favicon.ico">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <!-- <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css"> -->

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">var path_to_root = "";</script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = 'light'; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- <center><img src="/assets/logo3.png" width="140" height="140" /></center> -->
            <!-- <center><b>Outcome Documentation</b></center> -->
            <!-- <center><img src="assets/logo-docs.png" width="200" /></center> -->
            <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Preface</a></li><li class="chapter-item expanded "><a href="content/introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="content/project-overview.html"><strong aria-hidden="true">2.</strong> Project Overview</a></li><li class="chapter-item expanded "><a href="content/getting-started/getting-started.html"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/getting-started/installation.html"><strong aria-hidden="true">3.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="content/getting-started/running-an-example.html"><strong aria-hidden="true">3.2.</strong> Running an example</a></li></ol></li><li class="chapter-item expanded "><a href="content/concepts/basic-concepts.html"><strong aria-hidden="true">4.</strong> Basic concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="content/concepts/entity-component.html"><strong aria-hidden="true">4.1.</strong> Entities and components</a></li><li class="chapter-item expanded "><a href="content/concepts/address-variable.html"><strong aria-hidden="true">4.2.</strong> Addresses and variables</a></li><li class="chapter-item expanded "><a href="content/concepts/logic-processor.html"><strong aria-hidden="true">4.3.</strong> Embedded logic processor</a></li><li class="chapter-item expanded "><a href="content/concepts/model.html"><strong aria-hidden="true">4.4.</strong> Simulation model</a></li><li class="chapter-item expanded "><a href="content/concepts/scenario-module.html"><strong aria-hidden="true">4.5.</strong> Scenarios and modules</a></li><li class="chapter-item expanded "><a href="content/concepts/services.html"><strong aria-hidden="true">4.6.</strong> Services and data querying</a></li><li class="chapter-item expanded "><a href="content/concepts/persistence.html"><strong aria-hidden="true">4.7.</strong> Persistence and snapshots</a></li><li class="chapter-item expanded "><a href="content/concepts/load-balancing.html"><strong aria-hidden="true">4.8.</strong> Load balancing</a></li></ol></li></ol>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal <span class="default">(default)</span></button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">The Outcome Project Book</h1>

                        <div class="right-buttons">
                            <a href="print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#preface" id="preface">Preface</a></h1>
<blockquote>
<p><br><strong>NOTE:</strong> This is the first edition of the project documentation, compiled in a form of a short book. It's still <em>work in progress</em>, which means a lot of errors and unfinished pages. If you've spotted some silly error, or want to add a paragraph somewhere, you can <a href="https://github.com/theoutcome/docs/issues">create an issue on github</a>.<br><br></p>
</blockquote>
<h2><a class="header" href="#what-does-this-book-contain" id="what-does-this-book-contain">What does this book contain?</a></h2>
<p>It contains a compilation of easy to parse documents describing the project, it's various elements and goals.</p>
<p>It also includes information and guides relevant to the process of creating and running simulations, as well as integrating them with other software using existing APIs.</p>
<h2><a class="header" href="#who-is-this-book-intended-for" id="who-is-this-book-intended-for">Who is this book intended for?</a></h2>
<p>It's for anyone who wishes to understand the thought process behind the design of various elements of the project. It's for people who want to learn about how the simulations are created and run, how the models and data are handled.</p>
<p>It's also for anyone who doesn't want to dive into design details, but instead is interested in experimenting with already existing models and tools. It's fine to skip the chapters one may find boring or complicated - one can always revisit certain chapters as any problems come up later along the way.</p>
<h2><a class="header" href="#how-is-this-book-written" id="how-is-this-book-written">How is this book written?</a></h2>
<p>Documentation for this project is meant to be easy to read and understand for anyone, whether they have prior experience with computer programming or not.</p>
<p>That said, first edition is not kept up to this high standard of accessibility. It still contains language and references that may be difficult to parse for people without prior experience with programming. The goal for the next editions will be to further refine the documents in this book to:</p>
<ul>
<li>reduce usage of highly <em>industry-specific</em> terms</li>
<li>increase the number and quality of explanations where the above is not possible</li>
<li>increase the number of links to external resources</li>
<li>provide illustrations to make things easier to understand</li>
</ul>
<h1><a class="header" href="#introduction-to-the-project" id="introduction-to-the-project">Introduction to the project</a></h1>
<p>This page serves as a quick introduction to the project. It's written in a form of a list of answers to some of the frequently asked questions.</p>
<h2><a class="header" href="#what-is-this-project-about" id="what-is-this-project-about">What is this project about?</a></h2>
<p>It's about creation of user friendly solutions for simulation model design and processing. It's about discovering possibilities for collaboration on different kinds of simulations, from multiplayer game worlds to models of cities and economies.</p>
<p>At a more basic level it's also about discovering a good minimal simulation architecture that's useful, extendable and easy to use.</p>
<h2><a class="header" href="#what-could-it-be-compared-to-in-terms-of-already-existing-projects" id="what-could-it-be-compared-to-in-terms-of-already-existing-projects">What could it be compared to, in terms of already existing projects?</a></h2>
<p>Currently there are not that many projects aiming at making distributed simulations for games and science easier and more accessible.</p>
<p>One commercial project that exists in this space, which is actually using a similar underlying design approach, is <a href="https://documentation.improbable.io/spatialos-overview/docs"><em>SpatialOS</em></a>. That said, they are still very much a <em>black box</em> company with no interest in sharing their technology with the community.</p>
<h2><a class="header" href="#how-useful-is-it-right-now" id="how-useful-is-it-right-now">How useful is it right now?</a></h2>
<p>Right now the project consists of a proposed system for how collaborative simulation-modeling could happen, as well as experimental software implementing things that are necessary for this to happen.</p>
<p>If you're ready to build from source (Rust programming language) you can already run some of the software.</p>
<p>See <a href="content/project-overview.html">project overview</a> for more information about the , and <a href="https://theoutcomeproject.com/status/">the project status page</a> to learn more about what's being actively worked on right now.</p>
<h2><a class="header" href="#can-i-make-a-multiplayer-game-with-this" id="can-i-make-a-multiplayer-game-with-this">Can I make a multiplayer game with this?</a></h2>
<p>Yes. Once the software gets mature enough and provides a stable API you will be able to create all sorts of interactive experiences with it.</p>
<p>The main <em>selling point</em> in terms of using <code>outcome</code> to create multiplayer experiences, is the possibility for creating very large game worlds with hundreds, even thousands, of concurrently connected players.</p>
<h2><a class="header" href="#can-i-do-science-with-this" id="can-i-do-science-with-this">Can I do science with this?</a></h2>
<p>Sure. This project may become quite useful for studying complex emergent systems. As it grows it will probably become more and more useful for researchers. It's still not there yet though. </p>
<h2><a class="header" href="#what-does-reusing-other-peoples-models-mean" id="what-does-reusing-other-peoples-models-mean">What does &quot;reusing other people's models&quot; mean?</a></h2>
<p>It means that, due to modularity of the system, it's easier to stick different solutions together and expect them to work. If you wanted to simulate a whole city, you shouldn't have to model things like pedestrian behavior or weather systems from scratch.</p>
<p>Solutions that enable multiple people to work together on different parts of simulation models are still few and far in between. Projects like this one can start to attempt to change that.</p>
<h1><a class="header" href="#project-overview" id="project-overview">Project Overview</a></h1>
<p>This project is not monolithic. It's composed of a bunch of smaller efforts aimed at different subgoals. This includes not only core software, but also tech demos, documentation and community outreach.</p>
<h2><a class="header" href="#simulation-engine" id="simulation-engine">Simulation engine</a></h2>
<p>This is where the magic happens. <code>outcome</code> repository consists of the core library and the main command line tool.</p>
<h3><a class="header" href="#core-library" id="core-library">Core library</a></h3>
<p>At the core of it all lies the <strong>core engine library</strong>. It defines all the basic functionality related to creating and running simulations, exposing a simple interface to the programmer.</p>
<p>If we were to look into the code we would find that <code>outcome-core</code> package itself doesn't actually implement any concrete networking functionality. What is does is it provides a set of abstractions, like <em>nodes</em>, <em>connections</em> and basic <em>messages</em> (<em>&quot;signals&quot;</em>), which it uses internally to sketch out processing routines in a distributed setting without using any specific networking solution. Implementing different network transports and topologies on top of <code>outcome-core</code> is therefore fairly easy and doesn't involve hacking on the library itself.</p>
<h3><a class="header" href="#cli-tool" id="cli-tool">CLI tool</a></h3>
<p>Alongside the core library there exists the main <em>command-line interface</em> tool. It is what we will actually invoke working with the <code>outcome</code> engine from the command line.</p>
<p>One of the important things it implements is networking functionality. <code>outcome-cli</code> creates it's own notions of <em>servers</em>, <em>clients</em>, <em>workers</em> and more, to enable networked processing patterns, including running distributed simulation deployments. It builds on the generic concepts from the core library and gives them more substance, importing established solutions like the <code>zeromq</code> messaging library.</p>
<p>In the future, more networking middleware options may get integrated, either into <code>outcome-cli</code> itself, or as separate tools. For example, one very promising alternative to <code>zeromq</code> is the <code>aeron</code> library.</p>
<h2><a class="header" href="#inspector-tools" id="inspector-tools">Inspector tools</a></h2>
<p>WIP</p>
<h2><a class="header" href="#tech-demos" id="tech-demos">Tech demos</a></h2>
<p>WIP</p>
<h1><a class="header" href="#getting-started" id="getting-started">Getting started</a></h1>
<p>As with any journey, we have to start somewhere. Why not kick things off by writing a simple <em>&quot;hello world&quot;</em> simulation model and running it locally. Before we do that though we will first need to install <code>outcome</code> on our machine. </p>
<h1><a class="header" href="#installation" id="installation">Installation</a></h1>
<p>Currently the best way to run <code>outcome</code> deployments, whether local or distributed, is using the provided command-line tool. This will require us to <a href="https://towardsdatascience.com/a-quick-guide-to-using-command-line-terminal-96815b97b955">access and use the <em>terminal</em></a>, also called the <a href="https://en.wikipedia.org/wiki/Shell_(computing)"><em>shell</em></a> of our operating system.</p>
<h2><a class="header" href="#using-cargo-build-tool" id="using-cargo-build-tool">Using <code>cargo</code> build tool</a></h2>
<p>Since <code>outcome</code> is written in Rust programming language, we can leverage it's native <a href="https://doc.rust-lang.org/cargo/">build tool <code>cargo</code></a>. <code>cargo</code>'s <a href="https://doc.rust-lang.org/cargo/commands/cargo-install.html"><code>install</code> subcommand</a> can take care of downloading, building, and adding the resulting binary to our system's path so that we can easily run it from the command line.</p>
<p>First we will need to <a href="https://doc.rust-lang.org/cargo/getting-started/installation.html">install <code>cargo</code></a> itself. It comes bundled with a regular Rust language installation. Follow the instructions at <a href="https://rustup.rs/"><em>rustup.rs</em></a> to install Rust on your machine.</p>
<p>Once the installation is finished, run the following command:</p>
<pre><code>cargo install outcome-cli
</code></pre>
<blockquote>
<p><br><strong>NOTE:</strong> During compilation you may get an error message about missing dependencies. By default, <code>outcome</code> uses <code>zeromq</code> messaging library, or more accurately, it compiles it from c++ source. Long story short, using <code>outcome</code> with <code>zeromq</code> requires <code>cmake</code> and a c++ compiler, like <code>gcc</code>, to be installed on your system. This is not optimal, and in the future could be changed by replacing the currently used <code>libzmq-rs</code> bindings crate with native Rust implementation of the library.<br><br></p>
</blockquote>
<p>After the build process is complete, you should be able to use <code>outcome</code> from the command line like so:</p>
<pre><code>outcome --help
</code></pre>
<h2><a class="header" href="#using-pre-compiled-binaries" id="using-pre-compiled-binaries">Using pre-compiled binaries</a></h2>
<p>For major releases pre-compiled binary executables for selected operating systems may be provided. Check out the download section on the website for links to code repositories.</p>
<h1><a class="header" href="#running-an-example" id="running-an-example">Running an example</a></h1>
<p>So you have installed <code>outcome</code> on you machine and can now invoke it from the command line. Great! Why not run take a quick dive into things by running an example.</p>
<p>Even though <code>outcome</code> is designed around running distributed simulations with multiple machines, there is nothing stopping us from running it on just a single machine locally. Indeed it's very easy to do:</p>
<pre><code>outcome run &lt;path-to-scenario&gt;
</code></pre>
<p>The above command will spin up a simulation instance on our machine using the provided path to a scenario directory. By default it will start in an <em>interactive mode</em>, which can be seen as somewhat similar to a classic <a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a> — we will be able to step through the simulation and query data in-between the steps.</p>
<p>Now we only need an actual scenario we can run.</p>
<h1><a class="header" href="#basic-concepts" id="basic-concepts">Basic concepts</a></h1>
<p>In this chapter we’ll look at some of the core concepts behind <code>outcome</code> simulations.</p>
<p>It's recommended to go through this chapter to get an understanding of the basic ideas around which the system is organized.</p>
<p>Descriptions in this chapter are mostly introductory. For more details on the individual concepts consult later chapters.</p>
<h2><a class="header" href="#at-a-glance" id="at-a-glance">At a glance</a></h2>
<ul>
<li>simulation instance is essentially a collection entities, each with a collection of attached components</li>
<li>data is stored in variables, which are referenced by globally unique addresses</li>
<li>the engine features a built-in interpreter, logic execution happens on the component level and is based on clock-synchronized, event-triggered state machines</li>
<li>globally synchronized model contains</li>
<li>project files are organized into modules and scenarios</li>
<li>external processes that query simulation data using provided APIs are called <em>services</em></li>
<li>ad</li>
<li>arrangement of entities and services can be setup (and changed at runtime) to ensure efficient and performant computation, we call this <em>load balancing</em> </li>
</ul>
<h1><a class="header" href="#entities-and-components" id="entities-and-components">Entities and components</a></h1>
<p>In terms of core design aspects, <code>outcome</code> draws heavily from the ideas behind Entity-Component-System architecture, often shortened to ECS.</p>
<p>At it's most basic, any <code>outcome</code> simulation consists of a set of entities, each with a number of components attached to it. Result is a flexible arrangement of objects that can be used to accomplish many different tasks.</p>
<p>Exact arrangement of the entities and their components can be either very dynamic or more static. Entities can be created and destroyed, components can be attached and removed, or things can be established once in the beginning and not really change much during the course of the simulation.</p>
<p>Whether more dynamic or more static, the idea of entities and components is crucial to understand. It influences not only the data layout of a simulation, but also to a large extent the execution model itself.</p>
<h2><a class="header" href="#entity" id="entity">Entity</a></h2>
<p>Entities are the fundamental objects in the system. The most important elements an entity holds internally are:</p>
<ul>
<li>data storage object, and</li>
<li>component collection</li>
</ul>
<p>We can spawn as many entities as needed. They can be created at the initial set up point, or later during the simulation.</p>
<p>An entity is described by it's <em>type</em> and it's <em>id</em>, which together form it's unique identifier. Here's an example entity signature:</p>
<pre><code>:entity_type:entity_id
</code></pre>
<h3><a class="header" href="#entity-type" id="entity-type">Entity type</a></h3>
<p>When it comes to entities, an entity <em>type</em> helps define what components can be attached to an entity. Registering a component requires us to specify entity type for which it will be available.</p>
<p>As components will use entity-local addresses to get variables, we need this idea of matching types to be able to make some assumptions about what entity our component is attached to.</p>
<p>Each entity type introduces a new namespace for entities of that type. This means we can have entities <code>:yellow:banana</code> and <code>:green:banana</code> and they won't collide namespace-wise.</p>
<h2><a class="header" href="#component" id="component">Component</a></h2>
<p>Component lies at the core of computation. Each component instance is assigned to a single entity.</p>
<p>Each component defines a set of it's own variables and contains a single state machine (see next sub-chapter).</p>
<h3><a class="header" href="#component-type" id="component-type">Component type</a></h3>
<p>We can use component <em>type</em> to create sets of components that will have common characteristics.</p>
<p>Declaration of a new component type can contain things that we would normally declare for components themselves. What we define here will act as <em>default</em> for any new component of that type we might declare elsewhere. This <em>default</em> can be overriden for any of the entries by just declaring that entry on the component.</p>
<p>Component type can be also used as a way of organizing components, and/or expanding the component namespace (like with entity type).</p>
<pre><code class="language-yaml"># declare a new component type
component_type:
- id: decision
  vars:
  - id: template_var
  ...
  states:
  - id: template_state_1
  ...

# use the new component type
component:
- id: choice_213
  type: decision

# component `choice_213` has a var `template_var`
# /region/e_01001/decision/

</code></pre>
<h1><a class="header" href="#addresses-and-variables" id="addresses-and-variables">Addresses and variables</a></h1>
<p>All the data that exists within the scope of a simulation is organized into <em>variables</em>, which are referenced using <em>addresses</em>.</p>
<p>Since variables don't exist in a regular global state, and are instead stored on the level of individual entities, and are also organized around components, address format includes all that additional information.</p>
<h2><a class="header" href="#different-types-of-variables" id="different-types-of-variables">Different types of variables</a></h2>
<p>Working with variables we use the notion of <em>variable types</em> that specify the kinds of data stored by specific variables. For example variable of type <code>int</code> stores an integer number, while variable of type <code>str_list</code> stores a list of character strings.</p>
<p>Current implementation of the engine supports 4 basic variable types: <code>str</code>, <code>int</code>, <code>float</code> and <code>bool</code>, along with list and grid types for each of those: <code>str_list</code>, <code>int_list</code>, <code>float_list</code>, <code>bool_list</code>, <code>str_grid</code>, <code>int_grid</code>, <code>float_grid</code>, <code>bool_grid</code>. Basic variable types may be expanded in the future to include different sizes for numeric variables, e.g. <code>float128</code>, <code>uint8</code>.</p>
<h2><a class="header" href="#address-as-a-unique-reference" id="address-as-a-unique-reference">Address as a unique reference</a></h2>
<p>Addresses are used for referencing variables. Any full address is a unique reference to a specific variable stored within the scope of a simulation instance. This is an important feature in a distributed setting — we don't really need to know on which node the variable is currently stored, as long as we know the address we will be able to access it.</p>
<p>Each address is made up of three distinct parts, referencing respectively: entity, component and variable. Each of those three parts can be further broken down into two smaller chunks, broadly defined as <em>type</em> and <em>id</em>, though as we will learn later this means slightly different things for each of the parts.</p>
<p>Here is an example of a full address:</p>
<pre><code>:monster:m03:property:health:int:main
</code></pre>
<p>The same address but with a more visual breakdown into the three different parts:</p>
<pre><code>:[monster:m03]:[property:health]:[int:main]
</code></pre>
<p>So the the above address references some integer named <code>main</code>, existing as part of component of type <code>property</code> named <code>health</code>, which is attached to entity of type <code>monster</code> named <code>m03</code>.</p>
<h2><a class="header" href="#address-and-execution-scope" id="address-and-execution-scope">Address and execution scope</a></h2>
<p>Since the <em>embedded interpreter</em>, which we will learn more about in later chapters, executes logic within certain <em>scopes</em>, we need to be able to use scope-aware addresses.</p>
<p>When executing logic within the scope of some component, which itself exists within the scope of a certain entity, the engine will automatically use that scope to properly handle our &quot;local addresses&quot;.</p>
<p>Let's use the address from the previous paragraph as an example. Imagine we were defining some logic to be executed on a <code>property:health</code> component. No matter what kind of logic we're dealing with (don't worry, we will dive into all that in a later section) we wouldn't want to include specific entity reference, since our component could be attached to other <code>monster</code> type entities — it has to remain <em>&quot;entity instance agnostic&quot;</em>, so to speak.</p>
<p>Writing our logic we would refer to the variable simply as <code>int:main</code>, or alternatively <code>property:health:int:main</code>. The latter could also be used to access that same variable from another component attached to the same monster entity.</p>
<h2><a class="header" href="#address-as-signature-and-match-pattern" id="address-as-signature-and-match-pattern">Address as signature and &quot;match pattern&quot;</a></h2>
<p>Sometimes we will need to reference things like component types. For that we shall use certain combinations of the different address parts. These combinations are not usable as variable references. We call those <em>signatures</em>.</p>
<p>Again, following the earlier monster health example, signature of a <code>property</code> component type looks like this:</p>
<pre><code>:monster:*:property:*
</code></pre>
<p>First of all, as you can see we use a <code>*</code> star symbol to signalize a <em>wildcard</em>, or in other words — an <em>unknown</em>. Since component types have to be bound to specific entity types, the signature specifies an entity type, but omits specifying</p>
<p>of all, we always include both chunks of a single address part. That's why we include the</p>
<p>Based on the above it's not hard to imagine how we shall form a signature of an entity type:</p>
<pre><code>:monster:*
</code></pre>
<p>Notion of <em>wildcards</em>, or <em>unknowns</em>, is also used for simple pattern matching. Querying a simulation instance for health of all monsters we could simply use:</p>
<pre><code>:monster:*:property:health:int:main
</code></pre>
<p>On the level of the engine library, this is called <em>expanding</em> the address. <em>Expanding</em> the above pattern simply means creating a collection of matching addresses, like so:</p>
<pre><code>:monster:m02:property:health:int:main
:monster:m03:property:health:int:main
:monster:big_m01:property:health:int:main
</code></pre>
<h2><a class="header" href="#dynamic-address-using-part-substitution" id="dynamic-address-using-part-substitution">Dynamic address using part substitution</a></h2>
<h1><a class="header" href="#simulation-model" id="simulation-model">Simulation model</a></h1>
<p>At the heart of any simulation there usually lies some form of a <a href="https://en.wikipedia.org/wiki/Conceptual_model">model</a> that defines the relations and rules that apply to objects existing within that simulation.</p>
<p>In our case the model not only provides the initial layout of entities, components, events, etc., but is also read, and mutated, at runtime.</p>
<h2><a class="header" href="#assembling-the-model" id="assembling-the-model">Assembling the model</a></h2>
<p>Main approach championed by the engine is one focused on <em>incremental assembly</em>, meaning building up the model through the process of executing commands on already existing components.</p>
<p><em>Incremental assembly</em> is not the only way. One can also define the model in a more static fashion, for example using <code>yaml</code> or <code>json</code> structured data files.</p>
<h2><a class="header" href="#components-logic-models" id="components-logic-models">Components' logic models</a></h2>
<p><a href="content/concepts/logic-processor.html">Built-in logic processor</a> makes use of the global model to store instruction information. Definitions of models of individual components contain logic information in the form of lists of commands.</p>
<h2><a class="header" href="#lazy-loading-from-disk" id="lazy-loading-from-disk"><em>Lazy loading</em> from disk</a></h2>
<p>The engine will not attempt to load all the files within a scenario into memory and store within the global model object. This would cause problems with larger datasets.</p>
<p>Instead the model is understood more broadly to include the project (scenario, module) files stored on disk. Internally, the model object stores paths to all the files found within the scenario.</p>
<h2><a class="header" href="#synchronization-between-nodes" id="synchronization-between-nodes">Synchronization between nodes</a></h2>
<p>As the model serves as a <em>kernel</em> holding all the important simulation rules, it has to be globally accessible and globally synchronized.</p>
<p>In a distributed setting with multiple separate nodes, the global model is one of the few things these nodes share in common. As such, it serves as main source of truth when it comes to both entity/component <em>prototypes</em> and executable logic attached to components.</p>
<p>Since the model itself can be mutated at runtime, the system is able to centrally handle any changes and ensure proper propagation in case of such changes.</p>
<h1><a class="header" href="#services" id="services">Services</a></h1>
<h1><a class="header" href="#persistence-and-snapshots" id="persistence-and-snapshots">Persistence and snapshots</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
